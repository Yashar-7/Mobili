<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mobili Showroom 3D</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&family=Roboto+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --blue-mobili: #004a99; --brand-dark: #1a1a1a; --bg-light: #f8f8f8; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--bg-light); color: var(--brand-dark); font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; width: 100vw; }

        /* SPLASH SCREEN (Las Puertas) */
        #splash {
            position: fixed; inset: 0; z-index: 2000; display: flex;
            background: var(--bg-light); cursor: pointer; transition: 1s ease-in-out;
        }
        .door {
            flex: 1; height: 100%; border: 1px solid #ddd;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            transition: 1.2s cubic-bezier(0.7, 0, 0.3, 1); background: #ffffff;
        }
        .left-door { border-right: 2px solid var(--blue-mobili); }
        .right-door { border-left: 2px solid var(--blue-mobili); }
        
        .door-logo { width: 150px; margin-bottom: 30px; }
        .door-handle { width: 6px; height: 280px; background: #ccc; border-radius: 3px; }

        /* UI SOBRE EL 3D */
        #ui-layer {
            position: fixed; inset: 0; z-index: 100; pointer-events: none;
            display: flex; flex-direction: column; justify-content: space-between;
            padding: 20px; opacity: 0; transition: 1s;
        }
        .ui-header { text-align: center; margin-bottom: 20px; }
        .ui-header h1 { font-size: 1.5rem; color: var(--brand-dark); }
        .ui-header p { font-size: 0.9rem; color: #555; margin-top: 5px; }

        /* ETIQUETAS DE MEDIDA */
        .measure-tag {
            position: absolute; font-family: 'Roboto Mono', monospace; font-size: 0.7rem;
            color: var(--blue-mobili); background: rgba(255,255,255,0.8);
            padding: 5px 10px; border: 1px solid var(--blue-mobili); border-radius: 3px;
            pointer-events: none; white-space: nowrap;
        }

        .controls-panel { 
            display: flex; flex-wrap: wrap; justify-content: center; gap: 10px;
            pointer-events: all; padding-bottom: 20px;
        }
        .btn-control { 
            padding: 12px 20px; border: 1px solid var(--blue-mobili); background: #fff;
            font-size: 0.7rem; font-weight: bold; text-transform: uppercase; cursor: pointer;
            transition: 0.3s; color: var(--brand-dark); border-radius: 5px;
        }
        .btn-control:hover, .btn-control.active { background: var(--blue-mobili); color: #fff; }

        #link-mobili {
            display: block; text-align: center; margin-top: 15px;
            font-size: 0.7rem; color: var(--blue-mobili); text-decoration: none;
            font-family: 'Roboto Mono', monospace; pointer-events: all;
        }

        canvas { display: block; }
    </style>
</head>
<body>

    <div id="splash" onclick="initShowroom()">
        <div class="door left-door">
            <img class="door-logo" src="https://mobili.ar/wp-content/uploads/2022/11/logo-mobili.png" alt="Mobili">
            <div class="door-handle"></div>
        </div>
        <div class="door right-door">
            <img class="door-logo" src="https://mobili.ar/wp-content/uploads/2022/11/logo-mobili.png" alt="Mobili" style="visibility: hidden;">
            <div class="door-handle"></div>
        </div>
        <div style="position: absolute; bottom: 10%; color: var(--brand-dark); font-weight: 600; letter-spacing: 2px; font-size: 0.8rem; pointer-events: none;">[ EXPLORAR MODELO 3D ]</div>
    </div>

    <div id="ui-layer">
        <div class="ui-header">
            <h1>Mobili showroom</h1>
            <p>Visualizador Interactivo 3D</p>
        </div>

        <div class="measure-tag" style="top: 30%; left: 60%;">ALACENA: 2.40m x 0.70m</div>
        <div class="measure-tag" style="top: 30%; right: 20%;">ALACENA: 2.40m x 0.70m</div>
        <div class="measure-tag" style="top: 55%; left: 35%;">BAJO MESADA: 2.40m x 0.90m</div>
        <div class="measure-tag" style="top: 50%; right: 15%;">PROFUNDIDAD: 0.60m</div>

        <div class="controls-panel">
            <button class="btn-control active" onclick="changeMuebleColor(0xffffff, this)">Blanco</button>
            <button class="btn-control" onclick="changeMuebleColor(0x2c2c2c, this)">Grafito</button>
            <button class="btn-control" onclick="changeMuebleColor(0xdfc4a3, this)">Roble</button>
            <a href="https://mobili.ar/" target="_blank" class="btn-control" style="background: var(--blue-mobili); color: white; border-color: var(--blue-mobili);">Ir a mobili.ar</a>
        </div>
        <a id="link-mobili" href="https://mobili.ar/" target="_blank">https://mobili.ar/</a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, kitchenModule, materialMueble;

        function setupThreeJS() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf8f8f8); // Fondo claro para el showroom
            
            camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            document.body.appendChild(renderer.domElement); // Añade el canvas al body

            // GRID TÉCNICO (más sutil, como en la imagen)
            const grid = new THREE.GridHelper(10, 20, 0x999999, 0xcccccc);
            grid.position.y = -1.2; // Posicionamiento para que el mueble quede sobre el suelo
            scene.add(grid);

            // EL MUEBLE COMPLETO
            kitchenModule = new THREE.Group();
            materialMueble = new THREE.MeshStandardMaterial({ color: 0xffffff, roughness: 0.4, metalness: 0.1 });
            const steelMaterial = new THREE.MeshStandardMaterial({ color: 0xaaaaaa, metalness: 0.9, roughness: 0.2 });

            // Bajo Mesada
            const bajo = new THREE.Mesh(new THREE.BoxGeometry(2.4, 0.9, 0.6), materialMueble);
            bajo.position.y = -0.3; // Elevado ligeramente sobre el grid
            
            // Alacena Superior
            const alacena = new THREE.Mesh(new THREE.BoxGeometry(2.4, 0.7, 0.35), materialMueble);
            alacena.position.y = 1.3;

            // MANIJAS DE PERFIL J (LONGITUDINALES)
            const handleGeometry = new THREE.BoxGeometry(2.3, 0.04, 0.04); // Más finas y largas
            
            const handleBajo = new THREE.Mesh(handleGeometry, steelMaterial);
            handleBajo.position.set(0, 0.4, 0.31); // Centro del bajo mesada, al frente
            bajo.add(handleBajo);

            const handleAlacena = new THREE.Mesh(handleGeometry, steelMaterial);
            handleAlacena.position.set(0, -0.3, 0.18); // Centro de la alacena, al frente
            alacena.add(handleAlacena);

            kitchenModule.add(bajo, alacena);
            scene.add(kitchenModule);

            // ILUMINACIÓN (Suave y uniforme)
            const ambient = new THREE.AmbientLight(0xffffff, 0.8);
            const directional = new THREE.DirectionalLight(0xffffff, 0.7);
            directional.position.set(5, 5, 5);
            scene.add(ambient, directional);

            // POSICIÓN DE CÁMARA INICIAL (Más cercana y centrada)
            camera.position.set(3, 1.5, 5);
            camera.lookAt(0, 0.5, 0); // Mirando al centro del mueble

            animate();
        }

        function initShowroom() {
            document.querySelector('.left-door').style.transform = 'translateX(-100vw)'; // Se va completamente
            document.querySelector('.right-door').style.transform = 'translateX(100vw)'; // Se va completamente
            document.getElementById('splash').style.opacity = '0';
            setTimeout(() => {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('ui-layer').style.opacity = '1';
            }, 1000); // Coincide con la transición de las puertas
        }

        function changeMuebleColor(hexColor, button) {
            materialMueble.color.setHex(hexColor);
            document.querySelectorAll('.btn-control').forEach(btn => btn.classList.remove('active'));
            if (button) button.classList.add('active'); // Marca el botón activo
        }

        function animate() {
            requestAnimationFrame(animate);
            if (kitchenModule) {
                kitchenModule.rotation.y += 0.002; // Rotación suave para visualizar 3D
            }
            renderer.render(scene, camera);
        }

        // RESPONSIVE EN ACCIÓN
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        setupThreeJS();
    </script>
</body>
</html>
