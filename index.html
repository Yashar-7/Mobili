<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MOBILI | Interactive Showroom</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <style>
        :root { --blue-mobili: #004a99; --dark: #0a1f33; --bg-scene: #f2f2f2; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--bg-scene); font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; }

        /* LOGO CSS */
        .logo-container { display: flex; align-items: center; gap: 10px; }
        .logo-square { width: 35px; height: 35px; background: var(--blue-mobili); display: flex; justify-content: center; align-items: center; border-radius: 2px; }
        .logo-inner { width: 15px; height: 15px; background: white; border-radius: 1px; }
        .logo-text { color: var(--blue-mobili); font-weight: 700; font-size: 24px; letter-spacing: 2px; text-transform: uppercase; }

        /* PUERTAS DE ENTRADA CORREGIDAS */
        #splash { position: fixed; inset: 0; z-index: 2000; display: flex; cursor: pointer; }
        .door { flex: 1; height: 100%; background: #ffffff; display: flex; justify-content: center; align-items: center; border: 1px solid #ddd; transition: 1.2s cubic-bezier(0.7, 0, 0.3, 1); position: relative; }
        .left-door { border-right: 1px solid var(--blue-mobili); }
        .right-door { border-left: 1px solid var(--blue-mobili); }
        
        /* MANILLAS EN EL CENTRO (Donde se abre la puerta) */
        .handle { width: 8px; height: 200px; background: linear-gradient(to right, #999, #eee, #888); border-radius: 4px; position: absolute; }
        .left-door .handle { right: 15px; } /* Al borde derecho de la puerta izquierda */
        .right-door .handle { left: 15px; } /* Al borde izquierdo de la puerta derecha */

        /* INTERFAZ */
        #ui-layer { position: fixed; inset: 0; z-index: 100; pointer-events: none; display: flex; flex-direction: column; opacity: 0; transition: 1s; }
        .tag { position: absolute; background: white; border: 1.5px solid var(--blue-mobili); color: var(--blue-mobili); font-family: 'Roboto Mono'; font-size: 10px; font-weight: bold; padding: 5px 8px; border-radius: 4px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        .footer { padding: 10px; background: white; display: flex; overflow-x: auto; gap: 8px; pointer-events: all; border-top: 1px solid #ddd; }
        .btn { flex: 0 0 auto; padding: 10px 15px; border: 1.5px solid #eee; background: white; font-size: 9px; font-weight: bold; cursor: pointer; border-radius: 4px; }
        .btn.active { border-color: var(--blue-mobili); color: var(--blue-mobili); }
        .btn-cta { display: block; width: 100%; background: var(--dark); color: white; border: none; text-decoration: none; text-align: center; padding: 15px; font-weight: bold; pointer-events: all; }

        canvas { display: block; }
    </style>
</head>
<body>

    <div id="splash" onclick="openShowroom()">
        <div class="door left-door">
            <div class="logo-container"><div class="logo-square"><div class="logo-inner"></div></div><div class="logo-text">MOBILI</div></div>
            <div class="handle"></div>
        </div>
        <div class="door right-door">
            <div class="logo-container"><div class="logo-square"><div class="logo-inner"></div></div><div class="logo-text">MOBILI</div></div>
            <div class="handle"></div>
        </div>
    </div>

    <div id="ui-layer">
        <div style="padding: 20px; text-align: center;">
            <div class="logo-container" style="justify-content: center; transform: scale(0.7);">
                <div class="logo-square"><div class="logo-inner"></div></div><div class="logo-text">MOBILI</div>
            </div>
        </div>

        <div style="flex-grow: 1; position: relative;">
            <div class="tag" style="top: 15%; right: 5%;">ALACENA: 2.40m</div>
            <div class="tag" style="top: 50%; left: 5%;">BAJO MESADA: 0.90m</div>
            <div class="tag" style="bottom: 15%; right: 5%;">PROF: 0.60m</div>
        </div>

        <div class="footer">
            <button class="btn active" onclick="changeMat(0xffffff, false, this)">Blanco Brillante</button>
            <button class="btn" onclick="changeMat(0xBDB7AB, false, this)">Gris Arcilla</button>
            <button class="btn" onclick="changeMat(0xD2B48C, true, this)">Kendal Encerado</button>
            <button class="btn" onclick="changeMat(0x8B7355, true, this)">Halifax Natural</button>
            <button class="btn" onclick="changeMat(0x5D4037, true, this)">Nogal Warmia</button>
            <button class="btn" onclick="changeMat(0x373737, false, this)">Gris Sombra</button>
        </div>
        <a href="https://mobili.ar" target="_blank" class="btn-cta">CONSULTAR PRESUPUESTO</a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, group, materialMueble, woodTex;

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf2f2f2);
            camera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            document.body.appendChild(renderer.domElement);

            const loader = new THREE.TextureLoader();
            woodTex = loader.load('https://www.transparenttextures.com/patterns/wood-pattern.png');
            woodTex.wrapS = woodTex.wrapT = THREE.RepeatWrapping;

            scene.add(new THREE.GridHelper(20, 40, 0xcccccc, 0xdddddd));

            group = new THREE.Group();
            materialMueble = new THREE.MeshStandardMaterial({ color: 0xffffff, roughness: 0.4 });
            const steel = new THREE.MeshStandardMaterial({ color: 0x999999, metalness: 0.9, roughness: 0.1 });

            // BAJO MESADA
            const bajo = new THREE.Mesh(new THREE.BoxGeometry(2.4, 0.9, 0.6), materialMueble);
            bajo.position.y = -0.5;
            bajo.castShadow = true;

            // BACHA (HUECO)
            const bacha = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.05, 0.4), steel);
            bacha.position.set(0.4, 0.46, 0.05);
            bajo.add(bacha);

            // GRIFO (CANILLA)
            const faucetBase = new THREE.Mesh(new THREE.CylinderGeometry(0.02, 0.02, 0.3), steel);
            faucetBase.position.set(0.4, 0.6, -0.1);
            const faucetCurv = new THREE.Mesh(new THREE.TorusGeometry(0.1, 0.02, 16, 100, Math.PI), steel);
            faucetCurv.position.set(0.4, 0.75, -0.1);
            faucetCurv.rotation.z = Math.PI/2;
            bajo.add(faucetBase, faucetCurv);

            // ALACENA
            const ala = new THREE.Mesh(new THREE.BoxGeometry(2.4, 0.7, 0.35), materialMueble);
            ala.position.y = 1.2;
            ala.castShadow = true;

            group.add(bajo, ala);
            scene.add(group);

            // LUCES
            const light = new THREE.DirectionalLight(0xffffff, 1.2);
            light.position.set(5, 10, 7);
            light.castShadow = true;
            scene.add(light, new THREE.AmbientLight(0xffffff, 0.7));

            camera.position.set(0, 1, 6);
            render();
        }

        function openShowroom() {
            document.querySelector('.left-door').style.transform = 'translateX(-100%)';
            document.querySelector('.right-door').style.transform = 'translateX(100%)';
            setTimeout(() => {
                document.getElementById('splash').style.display = 'none';
                document.getElementById('ui-layer').style.opacity = '1';
            }, 1000);
        }

        function changeMat(col, tex, btn) {
            materialMueble.color.setHex(col);
            materialMueble.map = tex ? woodTex : null;
            materialMueble.needsUpdate = true;
            document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function render() {
            requestAnimationFrame(render);
            if(group) group.rotation.y += 0.003;
            renderer.render(scene, camera);
        }

        window.onresize = () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        };
        init();
    </script>
</body>
</html>
