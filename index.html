<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MOBILI | Showroom Final</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto+Mono&display=swap" rel="stylesheet">
    <style>
        :root { --blue-mobili: #004a99; --dark: #0a1f33; --bg-scene: #ececec; }
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: var(--bg-scene); font-family: 'Montserrat', sans-serif; overflow: hidden; height: 100vh; }

        .logo-container { display: flex; align-items: center; gap: 10px; }
        .logo-square { width: 35px; height: 35px; background: var(--blue-mobili); display: flex; justify-content: center; align-items: center; border-radius: 2px; }
        .logo-inner { width: 15px; height: 15px; background: white; border-radius: 1px; }
        .logo-text { color: var(--blue-mobili); font-weight: 700; font-size: 24px; letter-spacing: 2px; text-transform: uppercase; }

        #splash { position: fixed; inset: 0; z-index: 2000; display: flex; cursor: pointer; }
        .door { flex: 1; height: 100%; background: #ffffff; display: flex; justify-content: center; align-items: center; border: 1px solid #ddd; transition: 1.2s cubic-bezier(0.7, 0, 0.3, 1); position: relative; }
        .left-door { border-right: 2px solid var(--blue-mobili); }
        .right-door { border-left: 2px solid var(--blue-mobili); }
        
        .handle { width: 8px; height: 250px; background: linear-gradient(to right, #ccc, #eee, #bbb); border-radius: 4px; position: absolute; }
        .left-door .handle { right: 15px; }
        .right-door .handle { left: 15px; }

        #ui-layer { position: fixed; inset: 0; z-index: 100; pointer-events: none; display: flex; flex-direction: column; opacity: 0; transition: 1s; }
        .tag { position: absolute; background: white; border: 1.5px solid var(--blue-mobili); color: var(--blue-mobili); font-family: 'Roboto Mono'; font-size: 11px; font-weight: bold; padding: 5px 10px; border-radius: 4px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }

        .footer { padding: 10px; background: white; display: flex; overflow-x: auto; gap: 8px; pointer-events: all; border-top: 1px solid #ddd; }
        .btn { flex: 0 0 auto; padding: 10px 15px; border: 2px solid #eee; background: white; font-size: 9px; font-weight: bold; cursor: pointer; color: var(--dark); text-transform: uppercase; border-radius: 4px; }
        .btn.active { border-color: var(--blue-mobili); background: #f0f7ff; color: var(--blue-mobili); }
        .btn-cta { display: block; width: 100%; background: var(--dark); color: white; border: none; text-decoration: none; text-align: center; padding: 15px; font-weight: bold; font-size: 11px; pointer-events: all; }

        canvas { display: block; }
    </style>
</head>
<body>

    <div id="splash" onclick="openShowroom()">
        <div class="door left-door">
            <div class="logo-container"><div class="logo-square"><div class="logo-inner"></div></div><div class="logo-text">MOBILI</div></div>
            <div class="handle"></div>
        </div>
        <div class="door right-door">
            <div class="logo-container"><div class="logo-square"><div class="logo-inner"></div></div><div class="logo-text">MOBILI</div></div>
            <div class="handle"></div>
        </div>
    </div>

    <div id="ui-layer">
        <div style="padding: 20px; text-align: center;">
            <div class="logo-container" style="justify-content: center; transform: scale(0.8);"><div class="logo-square"><div class="logo-inner"></div></div><div class="logo-text">MOBILI</div></div>
        </div>
        <div style="flex-grow: 1; position: relative;">
            <div class="tag" style="top: 15%; right: 8%;">ALACENA: 2.40m</div>
            <div class="tag" style="top: 55%; left: 8%;">BAJO MESADA: 0.90m</div>
            <div class="tag" style="bottom: 15%; right: 8%;">PROF: 0.60m</div>
        </div>
        <div class="footer">
            <button class="btn active" onclick="updateColor(0xffffff, false, this)">Blanco Brillante</button>
            <button class="btn" onclick="updateColor(0xBDB7AB, false, this)">Gris Arcilla</button>
            <button class="btn" onclick="updateColor(0x1A1A1A, false, this)">Negro Brillante</button>
            <button class="btn" onclick="updateColor(0x78726F, false, this)">Gris Tapir</button>
            <button class="btn" onclick="updateColor(0xE8C499, true, this)">Madera Natural</button>
            <button class="btn" onclick="updateColor(0x373737, false, this)">Gris Sombra</button>
        </div>
        <a href="https://mobili.ar" target="_blank" class="btn-cta">CONSULTAR PRESUPUESTO</a>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        let scene, camera, renderer, group, materialMueble, woodTexture;

        function init() {
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0xf5f5f5);
            camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            document.body.appendChild(renderer.domElement);

            const loader = new THREE.TextureLoader();
            woodTexture = loader.load('https://www.transparenttextures.com/patterns/wood-pattern.png');
            woodTexture.wrapS = woodTexture.wrapT = THREE.RepeatWrapping;
            woodTexture.repeat.set(5, 5); // Veta más fina

            // ELIMINACIÓN DE LÍNEAS: Bajamos el grid para que no toque el mueble
            const grid = new THREE.GridHelper(20, 40, 0xcccccc, 0xdddddd);
            grid.position.y = -1.05; 
            scene.add(grid);

            group = new THREE.Group();
            materialMueble = new THREE.MeshStandardMaterial({ color: 0xffffff, roughness: 0.3 });
            const steel = new THREE.MeshStandardMaterial({ color: 0x999999, metalness: 0.8, roughness: 0.2 });

            const bajo = new THREE.Mesh(new THREE.BoxGeometry(2.4, 0.9, 0.6), materialMueble);
            bajo.position.y = -0.55; bajo.castShadow = true;
            
            const bacha = new THREE.Mesh(new THREE.BoxGeometry(0.5, 0.05, 0.4), steel);
            bacha.position.set(0.5, 0.46, 0.05); bajo.add(bacha);

            const faucet = new THREE.Group();
            const f1 = new THREE.Mesh(new THREE.CylinderGeometry(0.015, 0.015, 0.25), steel);
            const f2 = new THREE.Mesh(new THREE.TorusGeometry(0.08, 0.015, 12, 24, Math.PI), steel);
            f2.position.y = 0.12; f2.rotation.z = Math.PI/2;
            faucet.add(f1, f2); faucet.position.set(0.5, 0.58, -0.1); bajo.add(faucet);

            const ala = new THREE.Mesh(new THREE.BoxGeometry(2.4, 0.7, 0.35), materialMueble);
            ala.position.y = 1.1; ala.castShadow = true;

            group.add(bajo, ala);
            scene.add(group);

            const light = new THREE.DirectionalLight(0xffffff, 1.3);
            light.position.set(5, 10, 5); light.castShadow = true;
            scene.add(light, new THREE.AmbientLight(0xffffff, 0.7));

            camera.position.set(0, 0.5, 5.5); render();
        }

        function openShowroom() {
            document.querySelector('.left-door').style.transform = 'translateX(-100%)';
            document.querySelector('.right-door').style.transform = 'translateX(100%)';
            setTimeout(() => { document.getElementById('splash').style.display = 'none'; document.getElementById('ui-layer').style.opacity = '1'; }, 1000);
        }

        function updateColor(color, hasTexture, btn) {
            materialMueble.color.setHex(color);
            materialMueble.map = hasTexture ? woodTexture : null;
            materialMueble.needsUpdate = true;
            document.querySelectorAll('.btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
        }

        function render() { requestAnimationFrame(render); if(group) group.rotation.y += 0.003; renderer.render(scene, camera); }
        window.onresize = () => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); };
        init();
    </script>
</body>
</html>
