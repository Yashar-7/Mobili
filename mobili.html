<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Mobili.ar — Cocina Modular 3D</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <style>
    :root {
      --black: #0a0a0a;
      --white: #ffffff;
      --mobili-blue: #001f3f;
      --cyan: #00d4ff;
      --duration-door: 1.8s;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

    html, body {
      height: 100%;
      overflow: hidden;
      background: radial-gradient(ellipse at center, #000a1a 0%, #0a0a12 50%, #000000 100%);
      font-family: 'Montserrat', sans-serif;
      color: var(--white);
    }

    /* ========== PARTÍCULAS ========== */
    .particles-bg { position: fixed; inset: 0; z-index: 0; pointer-events: none; }

    /* ========== PUERTAS ========== */
    #puertas-container { position: fixed; inset: 0; z-index: 1000; cursor: pointer; overflow: hidden; }
    .puerta-izq, .puerta-der {
      position: absolute; top: 0; bottom: 0; width: 50%; background: var(--white);
      transition: transform var(--duration-door) cubic-bezier(0.4, 0, 0.2, 1);
      display: flex; align-items: center; justify-content: center;
    }
    .puerta-izq { left: 0; } .puerta-der { left: 50%; }
    .puerta-izq.abrir { transform: translateX(-100%); }
    .puerta-der.abrir { transform: translateX(100%); }

    .manija {
      position: absolute; top: 50%; transform: translateY(-50%); width: 8px; height: 160px;
      background: rgba(200, 230, 255, 0.9); border-radius: 4px;
      box-shadow: 0 0 20px var(--cyan), inset 0 0 15px white;
    }
    .puerta-izq .manija { right: 10px; } .puerta-der .manija { left: 10px; }

    .logo-puertas { display: flex; align-items: center; gap: 1rem; }
    .logo-square { width: 60px; height: 60px; border: 3px solid var(--mobili-blue); border-radius: 8px; }
    .logo-text { font-weight: 700; letter-spacing: 0.3em; color: var(--mobili-blue); }

    /* ========== MAIN APP ========== */
    .main-wrap {
      position: relative; z-index: 1; height: 100vh; width: 100vw;
      display: flex; flex-direction: column; opacity: 0; visibility: hidden;
      transition: opacity 1s ease;
    }
    .main-wrap.visible { opacity: 1; visibility: visible; }

    .scene-wrap { position: relative; flex: 1; width: 100%; overflow: hidden; }
    #canvas3d { width: 100%; height: 100%; touch-action: none; }

    /* Etiquetas */
    .dim-label {
      position: absolute; font-size: 0.65rem; color: var(--white);
      background: rgba(0, 31, 63, 0.85); padding: 0.3rem 0.6rem;
      border-radius: 4px; border: 1px solid var(--cyan);
      pointer-events: none; transform: translate(-50%, -50%); z-index: 10;
    }

    /* Panel Materiales Flotante (Desktop) */
    .panel-materials {
      position: absolute; top: 20px; right: 20px; width: 180px;
      background: rgba(0, 31, 63, 0.8); backdrop-filter: blur(10px);
      border: 1px solid var(--cyan); border-radius: 12px; padding: 1rem; z-index: 20;
    }
    .panel-materials h3 { font-size: 0.7rem; letter-spacing: 0.1em; margin-bottom: 10px; text-transform: uppercase; }
    .material-btn {
      width: 100%; padding: 8px; margin-bottom: 5px; background: rgba(255,255,255,0.05);
      border: 1px solid rgba(0, 212, 255, 0.3); color: white; border-radius: 6px;
      cursor: pointer; font-family: inherit; font-size: 0.7rem; text-align: left;
    }
    .material-btn.active { border-color: var(--cyan); background: rgba(0, 212, 255, 0.2); }

    /* Barra Inferior */
    .cta-bar {
      padding: 15px; background: rgba(0,0,0,0.5); backdrop-filter: blur(10px);
      display: flex; justify-content: center; gap: 10px; z-index: 30;
    }
    .cta {
      padding: 12px 20px; font-size: 0.7rem; font-weight: 700; color: white;
      text-decoration: none; border: 1px solid var(--cyan); border-radius: 8px;
      background: rgba(0, 31, 63, 0.9); letter-spacing: 1px; transition: 0.3s;
      display: flex; align-items: center; gap: 8px;
    }
    .cta:hover { background: var(--cyan); color: var(--black); }
    .cta svg { width: 16px; height: 16px; fill: currentColor; }

    /* ========== MOBILE OPTIMIZATION ========== */
    @media (max-width: 600px) {
      .logo-puertas { flex-direction: column; text-align: center; }
      
      /* Materiales como burbujas horizontales arriba */
      .panel-materials {
        top: 10px; left: 10px; right: 10px; width: auto; 
        padding: 8px; display: flex; align-items: center; gap: 8px;
        background: rgba(0, 15, 31, 0.9);
      }
      .panel-materials h3 { display: none; }
      .material-btn { 
        margin-bottom: 0; padding: 6px 10px; font-size: 0.6rem; 
        white-space: nowrap; flex: 1; text-align: center;
      }

      /* Barra inferior compacta */
      .cta-bar { padding: 10px; flex-wrap: wrap; }
      .cta { flex: 1 1 45%; padding: 10px; font-size: 0.55rem; justify-content: center; }
      .cta-ar { flex: 1 1 100%; }
      
      .dim-label { font-size: 0.55rem; padding: 2px 5px; }
    }
  </style>
</head>
<body>
  <div class="particles-bg" id="particlesBg"></div>

  <div id="puertas-container">
    <div class="puerta-izq" id="puertaIzq">
      <div class="logo-puertas">
        <div class="logo-square"></div>
        <div class="logo-text">MOBILI</div>
      </div>
      <div class="manija"></div>
    </div>
    <div class="puerta-der" id="puertaDer">
      <div class="logo-puertas">
        <div class="logo-square"></div>
        <div class="logo-text">MOBILI</div>
      </div>
      <div class="manija"></div>
    </div>
  </div>

  <div class="main-wrap" id="mainWrap">
    <div class="scene-wrap" id="sceneWrap">
      <canvas id="canvas3d"></canvas>
      <div class="dim-label" id="labelFrente">Frente: 2.50 m</div>
      <div class="dim-label" id="labelAltura">Altura: 2.20 m</div>
      <div class="dim-label" id="labelProf">Prof: 0.60 m</div>
      
      <div class="panel-materials" id="panelMaterials">
        <h3>Material</h3>
        <button class="material-btn active" data-mat="blanco">Blanco</button>
        <button class="material-btn" data-mat="negro">Negro</button>
        <button class="material-btn" data-mat="roble">Roble</button>
        <button class="material-btn" data-mat="nogal">Nogal</button>
      </div>
    </div>

    <div class="cta-bar">
      <button class="cta" id="btnCotizar">COTIZAR</button>
      <a href="#" class="cta">SHOWROOM</a>
      <a href="#" class="cta cta-ar">
        <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
        AR PROJECT
      </a>
    </div>
  </div>

  <script>
    (function () {
      // --- Puertas ---
      document.getElementById('puertas-container').onclick = function() {
        document.getElementById('puertaIzq').classList.add('abrir');
        document.getElementById('puertaDer').classList.add('abrir');
        document.getElementById('mainWrap').classList.add('visible');
        setTimeout(() => this.style.display = 'none', 1800);
      };

      // --- Three.js ---
      const canvas = document.getElementById('canvas3d');
      const scene = new THREE.Scene();
      scene.background = new THREE.Color(0x000a1a);
      
      const camera = new THREE.PerspectiveCamera(50, canvas.clientWidth / canvas.clientHeight, 0.1, 100);
      const renderer = new THREE.WebGLRenderer({ canvas, antialias: true });
      renderer.setPixelRatio(window.devicePixelRatio);
      renderer.setSize(canvas.clientWidth, canvas.clientHeight);

      // Mueble simple para demo
      const kitchen = new THREE.Group();
      const matCabinet = new THREE.MeshStandardMaterial({ color: 0xfaf8f5 });
      const body = new THREE.Mesh(new THREE.BoxGeometry(2.5, 2.2, 0.6), matCabinet);
      body.position.y = 1.1;
      kitchen.add(body);
      scene.add(kitchen);

      const light = new THREE.HeimisphereLight(0xffffff, 0x444444, 1.2);
      scene.add(light);
      const spot = new THREE.DirectionalLight(0xffffff, 0.8);
      spot.position.set(5, 5, 5);
      scene.add(spot);

      camera.position.set(0, 1.5, 5);
      camera.lookAt(0, 1, 0);

      // Materiales
      const colors = { blanco: 0xfaf8f5, negro: 0x111111, roble: 0xb58e58, nogal: 0x5d4037 };
      document.querySelectorAll('.material-btn').forEach(btn => {
        btn.onclick = () => {
          document.querySelectorAll('.material-btn').forEach(b => b.classList.remove('active'));
          btn.classList.add('active');
          matCabinet.color.setHex(colors[btn.dataset.mat]);
        };
      });

      function animate() {
        requestAnimationFrame(animate);
        kitchen.rotation.y += 0.005;
        renderer.render(scene, camera);
      }
      animate();

      window.onresize = () => {
        camera.aspect = canvas.clientWidth / canvas.clientHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(canvas.clientWidth, canvas.clientHeight);
      };
    })();
  </script>
</body>
</html>